# 搜索模块 (Search) 测试用例文档

> **测试类型**: 黑盒测试 (Black-box Testing)  
> **测试环境**: iOS / Android 真机  
> **测试范围**: 搜索页面、会话内搜索、用户筛选、搜索结果展示等模块  
> **编写日期**: 2026-01-13

---

## 一、UI/布局渲染测试 (nvue 特性)

### 1.1 搜索栏 (SearchBar) 布局测试

| 用例编号 | 模块/组件 | 测试项 | 前置条件 | 操作步骤 | 预期结果 (强调原生体验) | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| UI-SB-001 | SearchBar | 搜索栏整体布局 | 进入搜索页面 | 观察搜索栏的整体布局 | 搜索图标、输入框、取消按钮水平排列，垂直居中对齐，无错位或重叠 | P0 |
| UI-SB-002 | SearchBar | 刘海屏/动态岛适配 | 使用带刘海屏或动态岛的设备 | 进入搜索页面，观察顶部状态栏区域 | 搜索栏正确避开刘海屏/动态岛区域，statusBarHeight 正确获取并应用 padding | P0 |
| UI-SB-003 | SearchBar | 输入框圆角样式 | 进入搜索页面 | 观察输入框背景样式 | 输入框背景色为 #F0F2F7，圆角 8rpx，iOS/Android 表现一致 | P1 |
| UI-SB-004 | SearchBar | 清除按钮显示 | 在搜索框输入文字 | 输入任意文字后观察 | 输入框右侧出现清除按钮（X 图标），点击区域足够大（44rpx 以上） | P0 |
| UI-SB-005 | SearchBar | 取消按钮位置 | 进入搜索页面 | 观察取消按钮位置 | 取消按钮位于搜索框右侧，文字颜色为 rgba(0,0,0,0.9)，点击区域充足 | P1 |
| UI-SB-006 | SearchBar | placeholder 文字显示 | 进入搜索页面 | 观察输入框占位文字 | placeholder "搜索联系人、群聊、聊天记录" 完整显示，无截断 | P1 |
| UI-SB-007 | SearchBar | 输入文字截断 | 输入超长文字 | 输入超过输入框宽度的长文字 | 文字正常显示，超出部分可通过滑动查看，无溢出或布局错乱 | P1 |

### 1.2 搜索 Tab 栏测试

| 用例编号 | 模块/组件 | 测试项 | 前置条件 | 操作步骤 | 预期结果 (强调原生体验) | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| UI-ST-001 | SearchTab | Tab 栏整体布局 | 输入关键词后显示 Tab 栏 | 观察 Tab 栏布局 | "全部"、"用户"、"群聊"、"消息" 四个 Tab 水平排列，间距均匀 | P0 |
| UI-ST-002 | SearchTab | 选中态下划线 | 切换不同 Tab | 点击不同 Tab 观察选中态 | 选中 Tab 文字变为蓝色 (#1C66E5)，底部出现 4rpx 蓝色下划线 | P0 |
| UI-ST-003 | SearchTab | Tab 切换动画 | 快速切换 Tab | 连续快速点击不同 Tab | 下划线切换流畅，无闪烁或卡顿，原生级响应速度 | P1 |
| UI-ST-004 | SearchTab | Tab 文字对齐 | 显示 Tab 栏 | 观察 Tab 文字垂直对齐 | 所有 Tab 文字基线对齐，字号 28rpx，行高 40rpx | P1 |

### 1.3 搜索结果列表测试

| 用例编号 | 模块/组件 | 测试项 | 前置条件 | 操作步骤 | 预期结果 (强调原生体验) | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| UI-SR-001 | SearchResults | 分组标题显示 | 搜索有结果 | 观察结果列表分组标题 | "用户"、"群聊"、"聊天记录" 分组标题正确显示，字号 28rpx，颜色 #333333 | P0 |
| UI-SR-002 | SearchResults | 结果项头像显示 | 搜索有结果 | 观察结果项头像 | 头像 72rpx 大小，圆形显示，无变形或拉伸 | P0 |
| UI-SR-003 | SearchResults | 关键词高亮 | 搜索有结果 | 观察结果项中的关键词 | 匹配的关键词以蓝色 (#007AFF) 高亮显示，其他文字正常颜色 | P0 |
| UI-SR-004 | SearchResults | 副标题截断 | 搜索消息结果 | 观察消息内容副标题 | 超过 30 字符的副标题正确截断并显示 "..."，无溢出 | P1 |
| UI-SR-005 | SearchResults | 查看更多按钮 | 搜索结果超过 3 条 | 观察 "查看更多" 按钮 | 蓝色文字 "查看更多用户/群聊/消息"，点击区域充足 | P1 |
| UI-SR-006 | SearchResults | 分隔线显示 | 搜索有多条结果 | 观察结果项之间的分隔线 | 分隔线颜色 #E6E9F0，1rpx 粗细，左侧留有头像宽度的间距 | P2 |
| UI-SR-007 | SearchResults | 分组间隔 | 搜索有多类结果 | 观察不同分组之间的间隔 | 分组之间有 2rpx 高度的灰色间隔条 | P2 |

### 1.4 搜索结果项类型测试

| 用例编号 | 模块/组件 | 测试项 | 前置条件 | 操作步骤 | 预期结果 (强调原生体验) | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| UI-RI-001 | ResultItem | 用户结果项布局 | 搜索用户有结果 | 观察用户结果项 | 头像 + 用户名水平排列，用户名单行显示，超长截断 | P0 |
| UI-RI-002 | ResultItem | 群聊结果项布局 | 搜索群聊有结果 | 观察群聊结果项 | 群头像 + 群名称水平排列，群名称后可显示成员数后缀 | P0 |
| UI-RI-003 | ResultItem | 消息结果项布局 | 搜索消息有结果 | 观察消息结果项 | 发送者头像 + 发送者名称 + 消息内容预览，三行布局 | P0 |
| UI-RI-004 | ResultItem | 图片消息缩略图 | 搜索到图片消息 | 观察图片消息结果项 | 显示 80rpx x 80rpx 图片缩略图，圆角 8rpx | P1 |
| UI-RI-005 | ResultItem | 视频消息缩略图 | 搜索到视频消息 | 观察视频消息结果项 | 显示视频封面缩略图，中间叠加播放图标 | P1 |
| UI-RI-006 | ResultItem | 语音消息显示 | 搜索到语音消息 | 观察语音消息结果项 | 显示语音图标 + 时长 (如 "5''")，背景色 #F0F2F7 | P1 |
| UI-RI-007 | ResultItem | 文件消息显示 | 搜索到文件消息 | 观察文件消息结果项 | 显示文件图标（扩展名首字母）+ 文件名 + 文件大小 | P1 |
| UI-RI-008 | ResultItem | 表情消息显示 | 搜索到表情消息 | 观察表情消息结果项 | 表情图片 64rpx 大小正确显示 | P2 |
| UI-RI-009 | ResultItem | Emoji 内联显示 | 消息内容含 Emoji | 观察消息预览中的 Emoji | Emoji 以 28rpx 图片形式内联显示，与文字对齐 | P2 |

### 1.5 高级筛选区域测试

| 用例编号 | 模块/组件 | 测试项 | 前置条件 | 操作步骤 | 预期结果 (强调原生体验) | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| UI-AD-001 | MessageAdvanced | 时间筛选按钮布局 | 切换到消息 Tab | 观察时间筛选区域 | "选择时间:" 标签 + "全部"、"今天"、"近三天"、"近7天" 按钮水平排列 | P0 |
| UI-AD-002 | MessageAdvanced | 选中态样式 | 点击时间筛选按钮 | 观察选中按钮样式 | 选中按钮文字变为蓝色 (#1C66E5) | P1 |
| UI-AD-003 | MessageAdvanced | 自定义日期显示 | 选择自定义日期范围 | 观察 "全部" 按钮文字变化 | 显示为 "MM/DD-MM/DD" 格式的日期范围 | P1 |
| UI-AD-004 | UserAdvanced | 用户筛选区域布局 | 切换到用户 Tab | 观察用户筛选区域 | "性别:" + 性别值 + 下拉箭头 + "年龄:" + 年龄范围 水平排列 | P0 |
| UI-AD-005 | UserAdvanced | 点击区域 | 点击用户筛选区域 | 点击任意位置 | 整行可点击，跳转到用户筛选详情页 | P1 |

### 1.6 用户筛选页面测试

| 用例编号 | 模块/组件 | 测试项 | 前置条件 | 操作步骤 | 预期结果 (强调原生体验) | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| UI-UF-001 | userFilter | 页面整体布局 | 进入用户筛选页面 | 观察页面布局 | 灰色背景 (#F0F2F7)，白色卡片包含性别选择和年龄滑块 | P0 |
| UI-UF-002 | userFilter | 性别选择行 | 观察性别选择行 | 查看性别选择 UI | "性别" 标签 + 当前值 + 右箭头图标，水平排列 | P1 |
| UI-UF-003 | userFilter | 年龄滑块显示 | 观察年龄滑块 | 查看双滑块 UI | 两个圆形滑块（蓝色边框白色填充），中间蓝色轨道，两侧灰色轨道 | P0 |
| UI-UF-004 | userFilter | 滑块拖动区域 | 拖动年龄滑块 | 尝试拖动滑块 | 滑块响应灵敏，拖动时轨道颜色实时更新 | P0 |
| UI-UF-005 | userFilter | 确定按钮样式 | 观察确定按钮 | 查看按钮样式 | 蓝色背景 (#1C66E5)，白色文字，圆角 16rpx，宽度撑满 | P1 |
| UI-UF-006 | userFilter | 性别选择弹窗 | 点击性别选择行 | 观察弹出的选择器 | 底部弹出白色面板，包含 "不限"、"男"、"女"、"取消" 选项 | P0 |
| UI-UF-007 | userFilter | 弹窗遮罩层 | 弹出性别选择器 | 观察遮罩层 | 半透明黑色遮罩 (rgba(0,0,0,0.5))，点击可关闭弹窗 | P1 |

### 1.7 占位状态测试

| 用例编号 | 模块/组件 | 测试项 | 前置条件 | 操作步骤 | 预期结果 (强调原生体验) | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| UI-PH-001 | Presearch | 搜索历史显示 | 有搜索历史记录 | 进入搜索页面，未输入关键词 | 显示 "搜索历史" 标题 + 历史记录列表，每项带搜索图标 | P0 |
| UI-PH-002 | Presearch | 历史关键词高亮 | 有搜索历史，输入部分关键词 | 输入与历史匹配的部分文字 | 历史记录中匹配部分以蓝色高亮显示 | P1 |
| UI-PH-003 | Presearch | 全局搜索入口 | 非云端搜索模式 | 观察页面底部 | 显示 "进入全局搜索" 入口，带蓝色圆形搜索图标 | P1 |
| UI-PH-004 | Loading | 加载状态显示 | 触发搜索 | 观察加载状态 | 显示三个蓝色圆点 + "搜索中..." 文字，居中显示 | P0 |
| UI-PH-005 | Empty | 空结果显示 | 搜索无结果 | 观察空状态 | 显示空状态图标 + "暂无内容" 文字，居中显示 | P0 |

### 1.8 页面转场测试

| 用例编号 | 模块/组件 | 测试项 | 前置条件 | 操作步骤 | 预期结果 (强调原生体验) | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| UI-TR-001 | search | 进入搜索页转场 | 在会话列表页 | 点击搜索入口进入搜索页 | 页面从右侧滑入，无白屏或闪烁，搜索框自动获取焦点 | P0 |
| UI-TR-002 | search | 取消返回转场 | 在搜索页面 | 点击取消按钮 | 页面向右滑出返回，动画流畅，无卡顿 | P0 |
| UI-TR-003 | searchInConversation | 进入会话内搜索 | 在全局搜索结果页 | 点击消息结果进入会话内搜索 | 页面转场流畅，关键词和筛选条件正确传递 | P0 |
| UI-TR-004 | userFilter | 进入用户筛选页 | 在用户 Tab | 点击用户筛选区域 | 页面转场流畅，当前筛选值正确回显 | P0 |
| UI-TR-005 | userFilter | 筛选页返回 | 在用户筛选页 | 点击确定按钮 | 页面返回，筛选结果通过 eventChannel 正确传递 | P0 |
| UI-TR-006 | search | 点击结果跳转 | 搜索有结果 | 点击用户/群聊/消息结果项 | 跳转到对应详情页/聊天页，无白屏或渲染不完整 | P0 |

---

## 二、功能交互 & 通信测试

### 2.1 搜索输入交互

| 用例编号 | 模块/组件 | 测试项 | 前置条件 | 操作步骤 | 预期结果 (强调原生体验) | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| FN-IN-001 | SearchBar | 输入触发搜索 | 进入搜索页面 | 输入关键词后点击键盘搜索按钮 | 触发搜索，显示加载状态，然后显示搜索结果 | P0 |
| FN-IN-002 | SearchBar | 清除输入 | 输入框有内容 | 点击清除按钮 | 输入框清空，返回预搜索状态（显示历史记录） | P0 |
| FN-IN-003 | SearchBar | 取消搜索 | 在搜索页面 | 点击取消按钮 | 清空输入，关闭页面返回上一页 | P0 |
| FN-IN-004 | SearchBar | 自动获取焦点 | 进入搜索页面 | 观察输入框状态 | 输入框自动获取焦点，键盘弹出 | P1 |
| FN-IN-005 | SearchBar | 输入防抖 | 快速连续输入 | 快速输入多个字符 | 不会每次输入都触发搜索，有 300ms 防抖 | P1 |
| FN-IN-006 | SearchBar | 空格处理 | 输入纯空格 | 只输入空格后搜索 | 不触发搜索，保持预搜索状态 | P2 |

### 2.2 Tab 切换交互

| 用例编号 | 模块/组件 | 测试项 | 前置条件 | 操作步骤 | 预期结果 (强调原生体验) | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| FN-TB-001 | SearchTab | 切换到用户 Tab | 搜索有结果 | 点击 "用户" Tab | 仅显示用户搜索结果，显示用户筛选区域 | P0 |
| FN-TB-002 | SearchTab | 切换到群聊 Tab | 搜索有结果 | 点击 "群聊" Tab | 仅显示群聊搜索结果 | P0 |
| FN-TB-003 | SearchTab | 切换到消息 Tab | 搜索有结果 | 点击 "消息" Tab | 仅显示消息搜索结果，显示时间筛选区域 | P0 |
| FN-TB-004 | SearchTab | 切换回全部 Tab | 在非全部 Tab | 点击 "全部" Tab | 显示所有类型结果，清除高级筛选条件 | P0 |
| FN-TB-005 | SearchTab | Tab 切换后重新搜索 | 设置了筛选条件 | 切换 Tab 后观察 | 切换到全部 Tab 时清除筛选条件并重新搜索 | P1 |

### 2.3 搜索结果交互

| 用例编号 | 模块/组件 | 测试项 | 前置条件 | 操作步骤 | 预期结果 (强调原生体验) | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| FN-RS-001 | SearchResults | 点击用户结果 | 搜索到用户 | 点击用户结果项 | 跳转到用户详情页，传递正确的 userID | P0 |
| FN-RS-002 | SearchResults | 点击好友结果 | 搜索到好友 | 点击好友结果项 | 跳转到与该好友的聊天页面 | P0 |
| FN-RS-003 | SearchResults | 点击群聊结果 | 搜索到群聊 | 点击群聊结果项 | 跳转到群聊聊天页面 | P0 |
| FN-RS-004 | SearchResults | 点击会话消息结果 | 全局搜索消息 | 点击消息结果项（会话维度） | 跳转到会话内搜索页，传递 conversationID 和关键词 | P0 |
| FN-RS-005 | SearchResults | 点击单条消息结果 | 会话内搜索消息 | 点击单条消息结果 | 跳转到聊天页并定位到该消息 | P0 |
| FN-RS-006 | SearchResults | 查看更多用户 | 用户结果超过 3 条 | 点击 "查看更多用户" | 切换到用户 Tab，显示所有用户结果 | P1 |
| FN-RS-007 | SearchResults | 查看更多群聊 | 群聊结果超过 3 条 | 点击 "查看更多群聊" | 切换到群聊 Tab，显示所有群聊结果 | P1 |
| FN-RS-008 | SearchResults | 查看更多消息 | 消息结果超过 3 条 | 点击 "查看更多消息" | 切换到消息 Tab，显示所有消息结果 | P1 |
| FN-RS-009 | SearchResults | 加载更多（分页） | 在单类型 Tab 滚动到底部 | 滚动到列表底部 | 自动加载更多结果（如果有） | P1 |

### 2.4 高级筛选交互

| 用例编号 | 模块/组件 | 测试项 | 前置条件 | 操作步骤 | 预期结果 (强调原生体验) | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| FN-AF-001 | MessageAdvanced | 选择今天 | 在消息 Tab | 点击 "今天" 按钮 | 按钮高亮，搜索结果仅显示今天的消息 | P0 |
| FN-AF-002 | MessageAdvanced | 选择近三天 | 在消息 Tab | 点击 "近三天" 按钮 | 按钮高亮，搜索结果仅显示近三天的消息 | P0 |
| FN-AF-003 | MessageAdvanced | 选择近7天 | 在消息 Tab | 点击 "近7天" 按钮 | 按钮高亮，搜索结果仅显示近7天的消息 | P0 |
| FN-AF-004 | MessageAdvanced | 自定义日期范围 | 在消息 Tab | 点击 "全部" 按钮，选择日期范围 | 弹出日期选择器，选择后按日期范围筛选 | P0 |
| FN-AF-005 | MessageAdvanced | 取消时间筛选 | 已选择时间筛选 | 再次点击已选中的时间按钮 | 取消筛选，恢复显示全部消息 | P1 |
| FN-AF-006 | UserAdvanced | 进入用户筛选 | 在用户 Tab | 点击用户筛选区域 | 跳转到用户筛选页面，当前值正确回显 | P0 |
| FN-AF-007 | userFilter | 选择性别 | 在用户筛选页 | 点击性别行，选择 "男" | 性别值更新为 "男" | P0 |
| FN-AF-008 | userFilter | 调整年龄范围 | 在用户筛选页 | 拖动年龄滑块 | 年龄范围文字实时更新 | P0 |
| FN-AF-009 | userFilter | 滑块边界限制 | 在用户筛选页 | 尝试将两个滑块拖到同一位置 | 两个滑块保持最小 7 岁差距，无法重叠 | P1 |
| FN-AF-010 | userFilter | 确认筛选 | 设置筛选条件 | 点击确定按钮 | 返回搜索页，按新条件重新搜索 | P0 |

### 2.5 搜索历史交互

| 用例编号 | 模块/组件 | 测试项 | 前置条件 | 操作步骤 | 预期结果 (强调原生体验) | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| FN-HI-001 | Presearch | 点击历史记录 | 有搜索历史 | 点击某条历史记录 | 输入框填入该关键词，自动触发搜索 | P0 |
| FN-HI-002 | Presearch | 历史记录保存 | 无搜索历史 | 搜索关键词后退出再进入 | 刚搜索的关键词出现在历史记录中 | P0 |
| FN-HI-003 | Presearch | 历史记录去重 | 有搜索历史 | 搜索已存在的关键词 | 该关键词移到历史记录最前面，不重复 | P1 |
| FN-HI-004 | Presearch | 历史记录上限 | 搜索超过 20 个不同关键词 | 观察历史记录数量 | 最多保留 20 条，最早的被移除 | P2 |
| FN-HI-005 | Presearch | 历史记录过滤 | 有搜索历史 | 输入部分匹配的文字 | 仅显示包含输入内容的历史记录 | P1 |

### 2.6 全局搜索入口

| 用例编号 | 模块/组件 | 测试项 | 前置条件 | 操作步骤 | 预期结果 (强调原生体验) | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| FN-CL-001 | Presearch | 点击全局搜索 | 非云端搜索模式 | 点击 "进入全局搜索" | 切换到云端搜索模式，可搜索更多用户 | P1 |
| FN-CL-002 | Search | 云端搜索结果 | 云端搜索模式 | 搜索关键词 | 搜索结果包含非好友用户 | P1 |

### 2.7 会话内搜索

| 用例编号 | 模块/组件 | 测试项 | 前置条件 | 操作步骤 | 预期结果 (强调原生体验) | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| FN-CS-001 | searchInConversation | 初始关键词 | 从全局搜索跳转 | 进入会话内搜索页 | 自动填入关键词并搜索，显示该会话内的消息 | P0 |
| FN-CS-002 | searchInConversation | 仅显示消息结果 | 在会话内搜索 | 观察搜索结果 | 不显示用户、群聊分组，仅显示消息列表 | P0 |
| FN-CS-003 | searchInConversation | 不显示 Tab 栏 | 在会话内搜索 | 观察页面布局 | 不显示 Tab 切换栏 | P1 |
| FN-CS-004 | searchInConversation | 点击消息定位 | 搜索到消息 | 点击消息结果 | 跳转到聊天页并定位到该消息位置 | P0 |

### 2.8 页面间通信

| 用例编号 | 模块/组件 | 测试项 | 前置条件 | 操作步骤 | 预期结果 (强调原生体验) | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| FN-CM-001 | userFilter | eventChannel 通信 | 在用户筛选页 | 设置筛选条件后点击确定 | 通过 eventChannel 正确传递筛选结果到搜索页 | P0 |
| FN-CM-002 | searchInConversation | URL 参数传递 | 从全局搜索跳转 | 进入会话内搜索 | conversationID、keyword、option 通过 URL 正确传递 | P0 |
| FN-CM-003 | search | 全局变量传递 | 点击消息结果 | 跳转到聊天页 | 消息对象通过 uni.$locateMessage 正确传递 | P0 |

---

## 三、网络与数据测试

### 3.1 加载状态测试

| 用例编号 | 模块/组件 | 测试项 | 前置条件 | 操作步骤 | 预期结果 (强调原生体验) | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| NT-LD-001 | Search | 搜索加载中 | 网络正常 | 输入关键词搜索 | 显示加载动画（三个蓝色圆点 + "搜索中..."） | P0 |
| NT-LD-002 | Search | 加载完成 | 搜索进行中 | 等待搜索完成 | 加载动画消失，显示搜索结果或空状态 | P0 |
| NT-LD-003 | Search | 快速重复搜索 | 搜索进行中 | 修改关键词再次搜索 | 取消前一次搜索，显示新搜索的加载状态 | P1 |

### 3.2 空数据状态测试

| 用例编号 | 模块/组件 | 测试项 | 前置条件 | 操作步骤 | 预期结果 (强调原生体验) | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| NT-EM-001 | Search | 无搜索结果 | 网络正常 | 搜索不存在的关键词 | 显示空状态图标 + "暂无内容" 文字 | P0 |
| NT-EM-002 | Search | 部分类型无结果 | 网络正常 | 搜索仅匹配部分类型 | 有结果的类型正常显示，无结果的类型不显示分组 | P1 |
| NT-EM-003 | Presearch | 无搜索历史 | 首次使用 | 进入搜索页面 | 不显示搜索历史区域 | P1 |

### 3.3 网络异常测试

| 用例编号 | 模块/组件 | 测试项 | 前置条件 | 操作步骤 | 预期结果 (强调原生体验) | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| NT-NE-001 | Search | 网络断开搜索 | 断开网络 | 尝试搜索 | 显示 Toast 提示网络错误 | P0 |
| NT-NE-002 | Search | 搜索超时 | 网络极慢 | 搜索等待超时 | 显示超时提示，可重新搜索 | P1 |
| NT-NE-003 | Search | 网络恢复后搜索 | 网络恢复 | 重新搜索 | 正常显示搜索结果 | P1 |

### 3.4 数据持久化测试

| 用例编号 | 模块/组件 | 测试项 | 前置条件 | 操作步骤 | 预期结果 (强调原生体验) | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| NT-PS-001 | Presearch | 历史记录持久化 | 有搜索历史 | 关闭 App 后重新打开 | 搜索历史记录仍然存在 | P0 |
| NT-PS-002 | Presearch | 清除历史后持久化 | 清除搜索历史 | 关闭 App 后重新打开 | 搜索历史保持清空状态 | P1 |

---

## 四、性能与兼容性测试

### 4.1 列表滚动性能

| 用例编号 | 模块/组件 | 测试项 | 前置条件 | 操作步骤 | 预期结果 (强调原生体验) | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| PF-SC-001 | SearchResults | 长列表滚动帧率 | 搜索结果超过 50 条 | 快速上下滚动列表 | 滚动流畅，帧率保持 60fps，无卡顿或掉帧 | P0 |
| PF-SC-002 | SearchResults | 滚动惯性 | 搜索结果较多 | 快速滑动后松手 | 列表有自然的惯性滚动效果，符合原生体验 | P1 |
| PF-SC-003 | SearchResults | 滚动边界回弹 | 滚动到列表顶部/底部 | 继续滑动 | 有原生回弹效果（iOS）或边界阴影（Android） | P1 |
| PF-SC-004 | Presearch | 历史记录列表滚动 | 历史记录接近 20 条 | 滚动历史记录列表 | 滚动流畅，无卡顿 | P2 |

### 4.2 输入性能

| 用例编号 | 模块/组件 | 测试项 | 前置条件 | 操作步骤 | 预期结果 (强调原生体验) | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| PF-IP-001 | SearchBar | 快速输入响应 | 进入搜索页面 | 快速连续输入字符 | 输入响应即时，无延迟或丢字 | P0 |
| PF-IP-002 | SearchBar | 中文输入法 | 使用中文输入法 | 输入中文拼音并选字 | 输入过程流畅，选字后正确显示 | P0 |
| PF-IP-003 | SearchBar | 长文本输入 | 输入超长文本 | 输入超过 100 个字符 | 输入框正常处理，无崩溃或卡顿 | P1 |

### 4.3 滑块交互性能

| 用例编号 | 模块/组件 | 测试项 | 前置条件 | 操作步骤 | 预期结果 (强调原生体验) | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| PF-SL-001 | userFilter | 滑块拖动流畅度 | 在用户筛选页 | 拖动年龄滑块 | 滑块跟手，轨道颜色实时更新，无延迟 | P0 |
| PF-SL-002 | userFilter | 快速拖动滑块 | 在用户筛选页 | 快速左右拖动滑块 | 滑块响应流畅，无跳跃或错位 | P1 |
| PF-SL-003 | userFilter | 滑块松手回弹 | 拖动滑块超出边界 | 松手观察滑块位置 | 滑块回弹到正确位置 | P1 |

### 4.4 内存与资源

| 用例编号 | 模块/组件 | 测试项 | 前置条件 | 操作步骤 | 预期结果 (强调原生体验) | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| PF-MM-001 | Search | 频繁进出页面 | 正常使用 | 反复进入退出搜索页面 20 次 | 无内存泄漏，App 运行正常 | P0 |
| PF-MM-002 | Search | 频繁搜索 | 正常使用 | 连续搜索 50 次不同关键词 | 无内存泄漏，搜索响应正常 | P1 |
| PF-MM-003 | Search | 组件销毁清理 | 退出搜索页面 | 观察资源释放 | searchState 正确销毁，无残留监听器 | P1 |

### 4.5 iOS/Android 兼容性

| 用例编号 | 模块/组件 | 测试项 | 前置条件 | 操作步骤 | 预期结果 (强调原生体验) | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| PF-CP-001 | SearchBar | iOS 键盘适配 | 使用 iOS 设备 | 点击输入框 | 键盘弹出，页面正确上移，输入框可见 | P0 |
| PF-CP-002 | SearchBar | Android 键盘适配 | 使用 Android 设备 | 点击输入框 | 键盘弹出，页面正确上移，输入框可见 | P0 |
| PF-CP-003 | userFilter | iOS movable-view | 使用 iOS 设备 | 拖动年龄滑块 | 滑块拖动流畅，无卡顿 | P0 |
| PF-CP-004 | userFilter | Android movable-view | 使用 Android 设备 | 拖动年龄滑块 | 滑块拖动流畅，无卡顿 | P0 |
| PF-CP-005 | SearchResults | iOS list 组件 | 使用 iOS 设备 | 滚动搜索结果列表 | 滚动流畅，有原生回弹效果 | P1 |
| PF-CP-006 | SearchResults | Android list 组件 | 使用 Android 设备 | 滚动搜索结果列表 | 滚动流畅，有边界阴影效果 | P1 |
| PF-CP-007 | userFilter | iOS 底部弹窗 | 使用 iOS 设备 | 点击性别选择 | 底部弹窗动画流畅，符合 iOS 风格 | P1 |
| PF-CP-008 | userFilter | Android 底部弹窗 | 使用 Android 设备 | 点击性别选择 | 底部弹窗动画流畅，符合 Material 风格 | P1 |

---

## 五、边界与异常测试

### 5.1 特殊字符处理

| 用例编号 | 模块/组件 | 测试项 | 前置条件 | 操作步骤 | 预期结果 (强调原生体验) | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| BD-SC-001 | SearchBar | 特殊字符搜索 | 进入搜索页面 | 输入 `<script>alert(1)</script>` | 正常搜索，无 XSS 风险，特殊字符正确显示 | P0 |
| BD-SC-002 | SearchBar | Emoji 搜索 | 进入搜索页面 | 输入 Emoji 表情搜索 | 正常搜索，Emoji 正确显示 | P1 |
| BD-SC-003 | SearchBar | 中英文混合 | 进入搜索页面 | 输入中英文混合关键词 | 正常搜索，高亮正确 | P1 |
| BD-SC-004 | ResultItem | 特殊字符显示 | 搜索结果含特殊字符 | 观察结果显示 | 特殊字符正确显示，无乱码或渲染异常 | P1 |

### 5.2 URL 编码处理

| 用例编号 | 模块/组件 | 测试项 | 前置条件 | 操作步骤 | 预期结果 (强调原生体验) | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| BD-URL-001 | searchInConversation | 特殊字符 URL 传递 | 搜索含特殊字符的关键词 | 点击消息结果进入会话内搜索 | 关键词通过 encodeURIComponent 正确编码和解码 | P0 |
| BD-URL-002 | searchInConversation | JSON 选项 URL 传递 | 设置筛选条件后跳转 | 进入会话内搜索 | option 对象正确 JSON 序列化和反序列化 | P1 |

### 5.3 边界值处理

| 用例编号 | 模块/组件 | 测试项 | 前置条件 | 操作步骤 | 预期结果 (强调原生体验) | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| BD-BV-001 | userFilter | 年龄最小值 | 在用户筛选页 | 将最小年龄滑块拖到最左 | 最小年龄为 0，不能为负数 | P1 |
| BD-BV-002 | userFilter | 年龄最大值 | 在用户筛选页 | 将最大年龄滑块拖到最右 | 最大年龄为 99 | P1 |
| BD-BV-003 | userFilter | 年龄范围最小差值 | 在用户筛选页 | 尝试将两个滑块靠近 | 最小差值为 7 岁 | P1 |
| BD-BV-004 | Presearch | 历史记录上限 | 搜索超过 20 个关键词 | 观察历史记录 | 最多保留 20 条，最早的被删除 | P2 |

### 5.4 快速操作测试

| 用例编号 | 模块/组件 | 测试项 | 前置条件 | 操作步骤 | 预期结果 (强调原生体验) | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| BD-QK-001 | SearchTab | 快速切换 Tab | 搜索有结果 | 快速连续点击不同 Tab | Tab 切换正确，无错乱或崩溃 | P0 |
| BD-QK-002 | SearchBar | 快速清除再输入 | 输入框有内容 | 快速点击清除后立即输入 | 输入框正确清空并接受新输入 | P1 |
| BD-QK-003 | SearchResults | 快速点击结果项 | 搜索有结果 | 快速连续点击同一结果项 | 只触发一次跳转，无重复导航 | P1 |
| BD-QK-004 | userFilter | 快速拖动滑块 | 在用户筛选页 | 快速来回拖动滑块 | 滑块位置正确，数值更新正确 | P1 |

### 5.5 异常恢复测试

| 用例编号 | 模块/组件 | 测试项 | 前置条件 | 操作步骤 | 预期结果 (强调原生体验) | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| BD-RC-001 | Search | 搜索失败后重试 | 搜索失败 | 修改关键词重新搜索 | 正常发起新搜索 | P0 |
| BD-RC-002 | userFilter | 筛选页异常返回 | 在用户筛选页 | 使用系统返回手势 | 不触发筛选更新，保持原有条件 | P1 |
| BD-RC-003 | Search | 组件销毁后回调 | 快速退出页面 | 搜索过程中快速退出 | 无崩溃，回调被正确忽略 | P1 |

---

## 六、测试用例统计

| 测试维度 | 用例数量 |
| :--- | :--- |
| UI/布局渲染 | 45 |
| 功能交互 & 通信 | 42 |
| 网络与数据 | 12 |
| 性能与兼容性 | 20 |
| 边界与异常 | 17 |
| **总计** | **136** |

---

## 七、测试优先级说明

- **P0 (Critical)**: 核心功能，必须通过，阻塞发布
- **P1 (High)**: 重要功能，应该通过，可能影响用户体验
- **P2 (Medium)**: 次要功能，建议通过，对用户体验影响较小

---

## 八、测试设备建议

### iOS 设备
- iPhone 15 Pro Max (动态岛)
- iPhone 14 (刘海屏)
- iPhone SE 3 (小屏)
- iPad Pro 12.9 (大屏)

### Android 设备
- 小米 14 Pro (高刷屏)
- 华为 Mate 60 Pro (折叠屏展开态可选)
- OPPO Find X7 (曲面屏)
- 红米 Note 12 (中端机型)
- 三星 Galaxy A54 (海外机型)

---

## 九、注意事项

1. **nvue 特性**: 搜索模块使用 `<list>` 组件渲染结果列表，需特别关注滚动性能和 cell 复用
2. **movable-view**: 用户筛选页的年龄滑块使用 `movable-view`，需测试不同设备上的拖动体验
3. **键盘交互**: 搜索输入涉及键盘弹出/收起，需测试不同输入法的兼容性
4. **页面通信**: 多页面间通过 URL 参数和 eventChannel 通信，需验证数据传递完整性
5. **状态管理**: 搜索状态通过 `useSearchState` 管理，需验证组件销毁时资源正确释放
